#! /usr/bin/vvp
:ivl_version "12.0 (stable)";
:ivl_delay_selection "TYPICAL";
:vpi_time_precision - 9;
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/system.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/vhdl_sys.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/vhdl_textio.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/v2005_math.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/va_math.vpi";
S_0x5cc5076217c0 .scope module, "io_tb" "io_tb" 2 9;
 .timescale -9 -9;
v0x5cc507657100_0 .var "clk", 0 0;
v0x5cc507657210_0 .net "inp_ack", 0 0, v0x5cc507617530_0;  1 drivers
v0x5cc5076572d0_0 .net "inp_data", 15 0, v0x5cc507613cd0_0;  1 drivers
v0x5cc5076573a0_0 .var "inp_req", 0 0;
v0x5cc507657470_0 .net "out_ack", 0 0, v0x5cc507656c30_0;  1 drivers
v0x5cc507657560_0 .var "out_data", 15 0;
v0x5cc507657630_0 .var "out_req", 0 0;
v0x5cc507657700_0 .var "read_value", 15 0;
v0x5cc5076577a0_0 .var "rst_b", 0 0;
S_0x5cc50762d150 .scope task, "do_input" "do_input" 2 50, 2 50 0, S_0x5cc5076217c0;
 .timescale -9 -9;
v0x5cc507616500_0 .var "value", 15 0;
E_0x5cc5075ead20 .event posedge, v0x5cc507616da0_0;
E_0x5cc507624680 .event anyedge, v0x5cc507617530_0;
TD_io_tb.do_input ;
    %vpi_call 2 53 "$display", "\012[TB] === INP Request ===" {0 0 0};
    %wait E_0x5cc5075ead20;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x5cc5076573a0_0, 0;
T_0.0 ;
    %load/vec4 v0x5cc507657210_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %cmpi/ne 1, 0, 1;
    %jmp/0xz T_0.1, 6;
    %wait E_0x5cc507624680;
    %jmp T_0.0;
T_0.1 ;
    %wait E_0x5cc5075ead20;
    %load/vec4 v0x5cc5076572d0_0;
    %store/vec4 v0x5cc507616500_0, 0, 16;
    %vpi_call 2 61 "$display", "[TB] Primit: %0d (0x%h)", v0x5cc5076572d0_0, v0x5cc5076572d0_0 {0 0 0};
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x5cc5076573a0_0, 0;
T_0.2 ;
    %load/vec4 v0x5cc507657210_0;
    %pushi/vec4 0, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %cmpi/ne 1, 0, 1;
    %jmp/0xz T_0.3, 6;
    %wait E_0x5cc507624680;
    %jmp T_0.2;
T_0.3 ;
    %wait E_0x5cc5075ead20;
    %vpi_call 2 69 "$display", "[TB] INP complet\012" {0 0 0};
    %end;
S_0x5cc507655d50 .scope task, "do_output" "do_output" 2 74, 2 74 0, S_0x5cc5076217c0;
 .timescale -9 -9;
v0x5cc507616a50_0 .var "value", 15 0;
E_0x5cc507624010 .event anyedge, v0x5cc507656c30_0;
TD_io_tb.do_output ;
    %vpi_call 2 77 "$display", "\012[TB] === OUT Request: %0d ===", v0x5cc507616a50_0 {0 0 0};
    %wait E_0x5cc5075ead20;
    %load/vec4 v0x5cc507616a50_0;
    %assign/vec4 v0x5cc507657560_0, 0;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x5cc507657630_0, 0;
T_1.4 ;
    %load/vec4 v0x5cc507657470_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %cmpi/ne 1, 0, 1;
    %jmp/0xz T_1.5, 6;
    %wait E_0x5cc507624010;
    %jmp T_1.4;
T_1.5 ;
    %wait E_0x5cc5075ead20;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x5cc507657630_0, 0;
T_1.6 ;
    %load/vec4 v0x5cc507657470_0;
    %pushi/vec4 0, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %cmpi/ne 1, 0, 1;
    %jmp/0xz T_1.7, 6;
    %wait E_0x5cc507624010;
    %jmp T_1.6;
T_1.7 ;
    %wait E_0x5cc5075ead20;
    %vpi_call 2 92 "$display", "[TB] OUT complet\012" {0 0 0};
    %end;
S_0x5cc507655fd0 .scope module, "inp" "input_unit" 2 26, 3 6 0, S_0x5cc5076217c0;
 .timescale -9 -9;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 1 "rst_b";
    .port_info 2 /INPUT 1 "inp_req";
    .port_info 3 /OUTPUT 16 "inp_data";
    .port_info 4 /OUTPUT 1 "inp_ack";
P_0x5cc507635780 .param/l "DONE" 1 3 19, C4<10>;
P_0x5cc5076357c0 .param/l "DW" 0 3 7, +C4<00000000000000000000000000010000>;
P_0x5cc507635800 .param/l "IDLE" 1 3 17, C4<00>;
P_0x5cc507635840 .param/l "READ" 1 3 18, C4<01>;
v0x5cc507616da0_0 .net "clk", 0 0, v0x5cc507657100_0;  1 drivers
v0x5cc507617530_0 .var "inp_ack", 0 0;
v0x5cc507613cd0_0 .var "inp_data", 15 0;
v0x5cc507614180_0 .net "inp_req", 0 0, v0x5cc5076573a0_0;  1 drivers
v0x5cc5076144d0_0 .net "rst_b", 0 0, v0x5cc5076577a0_0;  1 drivers
v0x5cc507656480_0 .var/i "scan_result", 31 0;
v0x5cc507656560_0 .var "state", 1 0;
v0x5cc507656640_0 .var "temp_data", 15 0;
E_0x5cc507624460/0 .event negedge, v0x5cc5076144d0_0;
E_0x5cc507624460/1 .event posedge, v0x5cc507616da0_0;
E_0x5cc507624460 .event/or E_0x5cc507624460/0, E_0x5cc507624460/1;
S_0x5cc5076567c0 .scope module, "outp" "output_unit" 2 37, 4 6 0, S_0x5cc5076217c0;
 .timescale -9 -9;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 1 "rst_b";
    .port_info 2 /INPUT 1 "out_req";
    .port_info 3 /INPUT 16 "out_data";
    .port_info 4 /OUTPUT 1 "out_ack";
P_0x5cc50761c390 .param/l "DONE" 1 4 19, C4<10>;
P_0x5cc50761c3d0 .param/l "DW" 0 4 7, +C4<00000000000000000000000000010000>;
P_0x5cc50761c410 .param/l "IDLE" 1 4 17, C4<00>;
P_0x5cc50761c450 .param/l "WRITE" 1 4 18, C4<01>;
v0x5cc507656b60_0 .net "clk", 0 0, v0x5cc507657100_0;  alias, 1 drivers
v0x5cc507656c30_0 .var "out_ack", 0 0;
v0x5cc507656cd0_0 .net "out_data", 15 0, v0x5cc507657560_0;  1 drivers
v0x5cc507656dc0_0 .net "out_req", 0 0, v0x5cc507657630_0;  1 drivers
v0x5cc507656e80_0 .net "rst_b", 0 0, v0x5cc5076577a0_0;  alias, 1 drivers
v0x5cc507656f70_0 .var "state", 1 0;
    .scope S_0x5cc507655fd0;
T_2 ;
    %wait E_0x5cc507624460;
    %load/vec4 v0x5cc5076144d0_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_2.0, 8;
    %pushi/vec4 0, 0, 2;
    %assign/vec4 v0x5cc507656560_0, 0;
    %pushi/vec4 0, 0, 16;
    %assign/vec4 v0x5cc507613cd0_0, 0;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x5cc507617530_0, 0;
    %jmp T_2.1;
T_2.0 ;
    %load/vec4 v0x5cc507656560_0;
    %dup/vec4;
    %pushi/vec4 0, 0, 2;
    %cmp/u;
    %jmp/1 T_2.2, 6;
    %dup/vec4;
    %pushi/vec4 1, 0, 2;
    %cmp/u;
    %jmp/1 T_2.3, 6;
    %dup/vec4;
    %pushi/vec4 2, 0, 2;
    %cmp/u;
    %jmp/1 T_2.4, 6;
    %pushi/vec4 0, 0, 2;
    %assign/vec4 v0x5cc507656560_0, 0;
    %jmp T_2.6;
T_2.2 ;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x5cc507617530_0, 0;
    %load/vec4 v0x5cc507614180_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_2.7, 8;
    %pushi/vec4 1, 0, 2;
    %assign/vec4 v0x5cc507656560_0, 0;
T_2.7 ;
    %jmp T_2.6;
T_2.3 ;
    %vpi_call 3 42 "$display", "[INP] Introdu o valoare (decimal): " {0 0 0};
    %vpi_func 3 43 "$fscanf" 32, 32'b10000000000000000000000000000000, "%d", v0x5cc507656640_0 {0 0 0};
    %store/vec4 v0x5cc507656480_0, 0, 32;
    %load/vec4 v0x5cc507656640_0;
    %assign/vec4 v0x5cc507613cd0_0, 0;
    %vpi_call 3 45 "$display", "[INP] Citit: %0d (0x%h)", v0x5cc507656640_0, v0x5cc507656640_0 {0 0 0};
    %pushi/vec4 2, 0, 2;
    %assign/vec4 v0x5cc507656560_0, 0;
    %jmp T_2.6;
T_2.4 ;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x5cc507617530_0, 0;
    %load/vec4 v0x5cc507614180_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_2.9, 8;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x5cc507617530_0, 0;
    %pushi/vec4 0, 0, 2;
    %assign/vec4 v0x5cc507656560_0, 0;
T_2.9 ;
    %jmp T_2.6;
T_2.6 ;
    %pop/vec4 1;
T_2.1 ;
    %jmp T_2;
    .thread T_2;
    .scope S_0x5cc5076567c0;
T_3 ;
    %wait E_0x5cc507624460;
    %load/vec4 v0x5cc507656e80_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_3.0, 8;
    %pushi/vec4 0, 0, 2;
    %assign/vec4 v0x5cc507656f70_0, 0;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x5cc507656c30_0, 0;
    %jmp T_3.1;
T_3.0 ;
    %load/vec4 v0x5cc507656f70_0;
    %dup/vec4;
    %pushi/vec4 0, 0, 2;
    %cmp/u;
    %jmp/1 T_3.2, 6;
    %dup/vec4;
    %pushi/vec4 1, 0, 2;
    %cmp/u;
    %jmp/1 T_3.3, 6;
    %dup/vec4;
    %pushi/vec4 2, 0, 2;
    %cmp/u;
    %jmp/1 T_3.4, 6;
    %pushi/vec4 0, 0, 2;
    %assign/vec4 v0x5cc507656f70_0, 0;
    %jmp T_3.6;
T_3.2 ;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x5cc507656c30_0, 0;
    %load/vec4 v0x5cc507656dc0_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_3.7, 8;
    %pushi/vec4 1, 0, 2;
    %assign/vec4 v0x5cc507656f70_0, 0;
T_3.7 ;
    %jmp T_3.6;
T_3.3 ;
    %vpi_call 4 40 "$display", "[OUTPUT_UNIT] OUT> %0d", v0x5cc507656cd0_0 {0 0 0};
    %pushi/vec4 2, 0, 2;
    %assign/vec4 v0x5cc507656f70_0, 0;
    %jmp T_3.6;
T_3.4 ;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x5cc507656c30_0, 0;
    %load/vec4 v0x5cc507656dc0_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_3.9, 8;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x5cc507656c30_0, 0;
    %pushi/vec4 0, 0, 2;
    %assign/vec4 v0x5cc507656f70_0, 0;
T_3.9 ;
    %jmp T_3.6;
T_3.6 ;
    %pop/vec4 1;
T_3.1 ;
    %jmp T_3;
    .thread T_3;
    .scope S_0x5cc5076217c0;
T_4 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x5cc507657100_0, 0, 1;
    %end;
    .thread T_4;
    .scope S_0x5cc5076217c0;
T_5 ;
    %delay 50, 0;
    %load/vec4 v0x5cc507657100_0;
    %inv;
    %store/vec4 v0x5cc507657100_0, 0, 1;
    %jmp T_5;
    .thread T_5;
    .scope S_0x5cc5076217c0;
T_6 ;
    %vpi_call 2 101 "$dumpfile", "io_dump.vcd" {0 0 0};
    %vpi_call 2 102 "$dumpvars", 32'sb00000000000000000000000000000000, S_0x5cc5076217c0 {0 0 0};
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x5cc5076577a0_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x5cc5076573a0_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x5cc507657630_0, 0, 1;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x5cc507657560_0, 0, 16;
    %delay 200, 0;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x5cc5076577a0_0, 0, 1;
    %delay 100, 0;
    %vpi_call 2 115 "$display", "========================================" {0 0 0};
    %vpi_call 2 116 "$display", "    Test I/O Units - Mod Interactiv    " {0 0 0};
    %vpi_call 2 117 "$display", "========================================\012" {0 0 0};
    %vpi_call 2 120 "$display", "Test 1: Citire de la utilizator" {0 0 0};
    %fork TD_io_tb.do_input, S_0x5cc50762d150;
    %join;
    %load/vec4 v0x5cc507616500_0;
    %store/vec4 v0x5cc507657700_0, 0, 16;
    %vpi_call 2 122 "$display", "[TB] Valoare stocat\304\203: %0d", v0x5cc507657700_0 {0 0 0};
    %vpi_call 2 125 "$display", "Test 2: Afi\310\231are valoare citit\304\203" {0 0 0};
    %load/vec4 v0x5cc507657700_0;
    %store/vec4 v0x5cc507616a50_0, 0, 16;
    %fork TD_io_tb.do_output, S_0x5cc507655d50;
    %join;
    %vpi_call 2 129 "$display", "Test 3: Afi\310\231are valoare fix\304\203 (12345)" {0 0 0};
    %pushi/vec4 12345, 0, 16;
    %store/vec4 v0x5cc507616a50_0, 0, 16;
    %fork TD_io_tb.do_output, S_0x5cc507655d50;
    %join;
    %vpi_call 2 133 "$display", "Test 4: A doua citire" {0 0 0};
    %fork TD_io_tb.do_input, S_0x5cc50762d150;
    %join;
    %load/vec4 v0x5cc507616500_0;
    %store/vec4 v0x5cc507657700_0, 0, 16;
    %vpi_call 2 137 "$display", "Test 5: Afi\310\231are a doua valoare" {0 0 0};
    %load/vec4 v0x5cc507657700_0;
    %store/vec4 v0x5cc507616a50_0, 0, 16;
    %fork TD_io_tb.do_output, S_0x5cc507655d50;
    %join;
    %delay 500, 0;
    %vpi_call 2 141 "$display", "\012========================================" {0 0 0};
    %vpi_call 2 142 "$display", "         Test I/O Complet!              " {0 0 0};
    %vpi_call 2 143 "$display", "========================================" {0 0 0};
    %vpi_call 2 144 "$finish" {0 0 0};
    %end;
    .thread T_6;
# The file index is used to find the file name in the following table.
:file_names 5;
    "N/A";
    "<interactive>";
    "io_tb.v";
    "./input_unit.v";
    "./output_unit.v";
